// =================================================================
// MEDIQUE - CENTRAL TRANSLATION SCRIPT (JAVASCRIPT ONLY)
// =================================================================

const translations = {
    'en': {
        // PatientDashboard.html
        'welcomeTitle': "ЁЯПе Patient Dashboard", 'welcomeText': "Welcome, Kamal Perera", 'hospitalSelectTitle': "Select Hospital & Clinic", 'tokenStatusTitle': "Current Token Status", 'currentTokenLabel': "Current Token", 'waitTimeLabel': "Estimated Wait", 'queueLabel': "In Queue", 'alertsTitle': "SMS Alerts", 'smsStatusText': "SMS Notifications", 'smsDescription': "Get notified when your turn approaches", 'healthTipTitle': "ЁЯТб Health Tip of the Day", 'registerBtn': "Register New Token", 'manageBtn': "Manage Token",
        // RegisterToken.html
        'register.page.title': "Patient Dashboard", 'register.page.subtitle': "Easily register your token.", 'register.page.mainbutton': "Register New Token", 'register.modal.title': "Register New Token", 'register.step1.name': "Identification", 'register.step2.name': "Patient Details", 'register.step3.name': "Appointment", 'register.step4.name': "Confirmation", 'register.step1.title': "Step 1: Patient Identification", 'register.step1.label.mobile': "Mobile Number:", 'register.step1.helptext': "Enter your number and press 'Check'. If you are already registered, your details will be auto-filled.", 'register.step2.title': "Step 2: New Patient Details", 'register.step2.label.name': "Full Name:", 'register.step2.label.dob': "Date of Birth:", 'register.step2.label.gender': "Gender:", 'register.option.select': "Select...", 'register.option.male': "Male", 'register.option.female': "Female", 'register.option.other': "Other", 'register.step3.title': "Step 3: Appointment Details", 'register.step3.label.doctor': "Select Doctor:", 'register.step3.label.date': "Date:", 'register.step3.label.reason': "Reason for Visit (Briefly):", 'register.step4.title': "Step 4: Confirm Your Details", 'register.step4.label.name': "Patient Name:", 'register.step4.label.mobile': "Mobile Number:", 'register.step4.label.doctor': "Doctor:", 'register.step4.label.date': "Date:", 'register.step4.label.fee': "Fee:", 'register.step4.helptext': "Please review the information above and press 'Confirm & Register'.", 'register.button.previous': "Previous", 'register.button.next': "Next", 'register.button.submit': "Confirm & Register"
    },
    'si': {
        // PatientDashboard.html
        'welcomeTitle': "ЁЯПе р╢╗р╖Эр╢Ьр╖У р╢┤р╖Фр╖Ар╢╗р╖Фр╖А", 'welcomeText': "р╢Жр╢║р╖Фр╢╢р╖Эр╖Ар╢▒р╖К, р╢Ър╢╕р╢╜р╖К р╢┤р╖Щр╢╗р╖Ър╢╗р╖П", 'hospitalSelectTitle': "р╢╗р╖Эр╖Др╢╜ р╖Гр╖Д р╢Ър╖Кр╢╜р╖Тр╢▒р╖Тр╢Ъ р╢нр╖Эр╢╗р╢▒р╖Кр╢▒", 'tokenStatusTitle': "р╖Ар╢╗р╖Кр╢нр╢╕р╖Пр╢▒ р╢зр╖Эр╢Ър╢▒р╢║ р╢нр╢нр╖Кр╖Ар╢║", 'currentTokenLabel': "р╖Ар╢╗р╖Кр╢нр╢╕р╖Пр╢▒ р╢зр╖Эр╢Ър╢▒р╢║", 'waitTimeLabel': "р╢Зр╖Гр╖Кр╢нр╢╕р╖Ър╢▒р╖Кр╢нр╖Фр╢Ьр╢н р╢╢р╢╜р╖Пр╖Гр╖Тр╢зр╖Ур╢╕", 'queueLabel': "р╢┤р╖Эр╢╜р╖Тр╢╕р╖Ъ", 'alertsTitle': "SMS р╢Ер╢▒р╢нр╖Фр╢╗р╖Ф р╢Зр╢Яр╖Ар╖Ур╢╕р╖К", 'smsStatusText': "SMS р╢пр╖Рр╢▒р╖Фр╢╕р╖Кр╢пр╖Ур╢╕р╖К", 'smsDescription': "р╢Фр╢╢р╖Ъ р╖Ар╢╗р╢║ р╖Ер╢В р╖Ар╢▒ р╖Ар╖Тр╢з р╢пр╖Рр╢▒р╖Фр╢╕р╖К р╢пр╖Щр╢▒р╖Кр╢▒", 'healthTipTitle': "ЁЯТб р╢пр╖Тр╢▒р╢║р╖Ъ р╖Гр╖Юр╢Ыр╖КтАНр╢║ р╢Лр╢┤р╢пр╖Щр╖Г", 'registerBtn': "р╢▒р╖А р╢зр╖Эр╢Ър╢▒р╢║р╢Ър╖К р╢╜р╖Тр╢║р╖Пр╢┤р╢пр╖Тр╢Вр╢ар╖Т р╢Ър╢╗р╢▒р╖Кр╢▒", 'manageBtn': "р╢зр╖Эр╢Ър╢▒р╢║ р╢Ър╖Ер╢╕р╢▒р╖Пр╢Ър╢╗р╢лр╢║ р╢Ър╢╗р╢▒р╖Кр╢▒",
        // RegisterToken.html
        'register.page.title': "р╢╗р╖Эр╢Ьр╖У р╢┤р╖Фр╖Ар╢╗р╖Фр╖А", 'register.page.subtitle': "р╢Фр╢╢р╖Ъ р╢зр╖Эр╢Ър╢▒р╢║ р╢┤р╖Др╖Гр╖Фр╖Ар╖Щр╢▒р╖К р╢╜р╖Тр╢║р╖Пр╢┤р╢пр╖Тр╢Вchi р╢Ър╢╗р╢▒р╖Кр╢▒.", 'register.page.mainbutton': "р╢▒р╖А р╢зр╖Эр╢Ър╢▒р╢║р╢Ър╖К р╢╜р╖Тр╢║р╖Пр╢┤р╢пр╖Тр╢Вр╢ар╖Т р╢Ър╢╗р╢▒р╖Кр╢▒", 'register.modal.title': "р╢▒р╖А р╢зр╖Эр╢Ър╢▒р╢║р╢Ър╖К р╢╜р╖Тр╢║р╖Пр╢┤р╢пр╖Тр╢Вр╢ар╖Т р╢Ър╢╗р╢▒р╖Кр╢▒", 'register.step1.name': "р╖Др╢│р╖Фр╢▒р╖Пр╢Ьр╖Рр╢▒р╖Ур╢╕", 'register.step2.name': "р╢╗р╖Эр╢Ьр╖У р╖Ар╖Тр╖Гр╖Кр╢нр╢╗", 'register.step3.name': "р╖Ар╖Щр╢▒р╖Кр╢Ър╢╗р╖Ар╖П р╢Ьр╖Рр╢▒р╖Ур╢╕", 'register.step4.name': "р╢нр╖Др╖Ар╖Фр╢╗р╖Ф р╢Ър╖Тр╢╗р╖Ур╢╕", 'register.step1.title': "р╢┤р╖Тр╢║р╖Ар╢╗ 1: р╢╗р╖Эр╢Ьр╖Тр╢║р╖П р╖Др╢│р╖Фр╢▒р╖Пр╢Ьр╖Рр╢▒р╖Ур╢╕", 'register.step1.label.mobile': "р╢пр╖Фр╢╗р╢Ър╢ор╢▒ р╢Ер╢Вр╢Ър╢║:", 'register.step1.helptext': "р╢Фр╢╢р╖Ъ р╢Ер╢Вр╢Ър╢║ р╢Зр╢нр╖Фр╖Ер╢нр╖К р╢Ър╢╗ 'Check' р╢Фр╢╢р╢▒р╖Кр╢▒. р╢Фр╢╢ р╢пр╖Рр╢▒р╢зр╢╕р╢нр╖К р╢╜р╖Тр╢║р╖Пр╢┤р╢пр╖Тр╢Вр╢ар╖Т р╖Ар╖У р╢Зр╢нр╖Кр╢▒р╢╕р╖К, р╢Фр╢╢р╖Ъ р╖Ар╖Тр╖Гр╖Кр╢нр╢╗ р╖Гр╖Кр╖Ар╢║р╢Вр╢Ър╖КтАНр╢╗р╖Ур╢║р╖А р╢┤р╖Тр╢╗р╖Ъ.", 'register.step2.title': "р╢┤р╖Тр╢║р╖Ар╢╗ 2: р╢▒р╖А р╢╗р╖Эр╢Ьр╖У р╖Ар╖Тр╖Гр╖Кр╢нр╢╗", 'register.step2.label.name': "р╖Гр╢╕р╖Кр╢┤р╖Цр╢╗р╖Кр╢л р╢▒р╢╕:", 'register.step2.label.dob': "р╢Лр╢┤р╢▒р╖К р╢пр╖Тр╢▒р╢║:", 'register.step2.label.gender': "р╖Гр╖Кр╢нр╖КтАНр╢╗р╖У/р╢┤р╖Фр╢╗р╖Фр╖В р╢╖р╖Пр╖Ар╢║:", 'register.option.select': "р╢нр╖Эр╢╗р╢▒р╖Кр╢▒...", 'register.option.male': "р╢┤р╖Тр╢╗р╖Тр╢╕р╖Т", 'register.option.female': "р╢Ьр╖Рр╖Др╖Рр╢лр╖Ф", 'register.option.other': "р╖Ар╖Щр╢▒р╢нр╖К", 'register.step3.title': "р╢┤р╖Тр╢║р╖Ар╢╗ 3: р╖Ар╖Щр╢▒р╖Кр╢Ър╢╗р╖Ар╖П р╢Ьр╖Рр╢▒р╖Ур╢╕р╖Ъ р╖Ар╖Тр╖Гр╖Кр╢нр╢╗", 'register.step3.label.doctor': "р╖Ар╖Ыр╢пр╖КтАНр╢║р╖Ар╢╗р╢║р╖П р╢нр╖Эр╢╗р╢▒р╖Кр╢▒:", 'register.step3.label.date': "р╢пр╖Тр╢▒р╢║:", 'register.step3.label.reason': "р╢┤р╖Рр╢╕р╖Тр╢лр╖Ур╢╕р╢з р╖Др╖Ър╢нр╖Фр╖А (р╢Ър╖Щр╢зр╖Тр╢║р╖Щр╢▒р╖К):", 'register.step4.title': "р╢┤р╖Тр╢║р╖Ар╢╗ 4: р╢Фр╢╢р╖Ъ р╖Ар╖Тр╖Гр╖Кр╢нр╢╗ р╢нр╖Др╖Ар╖Фр╢╗р╖Ф р╢Ър╢╗р╢▒р╖Кр╢▒", 'register.step4.label.name': "р╢╗р╖Эр╢Ьр╖Тр╢║р╖Пр╢Ьр╖Ъ р╢▒р╢╕:", 'register.step4.label.mobile': "р╢пр╖Фр╢╗р╢Ър╢ор╢▒ р╢Ер╢Вр╢Ър╢║:", 'register.step4.label.doctor': "р╖Ар╖Ыр╢пр╖КтАНр╢║р╖Ар╢╗р╢║р╖П:", 'register.step4.label.date': "р╢пр╖Тр╢▒р╢║:", 'register.step4.label.fee': "р╢Ьр╖Пр╖Гр╖Кр╢нр╖Фр╖А:", 'register.step4.helptext': "р╢Ър╢╗р╖Фр╢лр╖Пр╢Ър╢╗ р╢Йр╖Др╢н р╢нр╖Ьр╢╗р╢нр╖Фр╢╗р╖Ф р╖Гр╢╕р╖Пр╢╜р╖Эр╢ар╢▒р╢║ р╢Ър╢╗ 'Confirm & Register' р╢Фр╢╢р╢▒р╖Кр╢▒.", 'register.button.previous': "р╢┤р╖Щр╢╗", 'register.button.next': "р╢Кр╖Ер╢Я", 'register.button.submit': "р╢нр╖Др╖Ар╖Фр╢╗р╖Ф р╢Ър╢╗ р╢╜р╖Тр╢║р╖Пр╢┤р╢пр╖Тр╢Вр╢ар╖Т р╖Ар╢▒р╖Кр╢▒"
    },
    'ta': {
        // PatientDashboard.html
        'welcomeTitle': "ЁЯПе роирпЛропро╛ро│ро┐ роЯро╛ро╖рпНрокрпЛро░рпНроЯрпБ", 'welcomeText': "ро╡рогроХрпНроХроорпН, роХрооро▓рпН рокрпЖро░рпЗро░ро╛", 'hospitalSelectTitle': "рооро░рпБродрпНродрпБро╡рооройрпИ рооро▒рпНро▒рпБроорпН роХро┐ро│ро┐ройро┐роХрпН родрпЗро░рпНро╡рпБ", 'tokenStatusTitle': "родро▒рпНрокрпЛродрпИроп роЯрпЛроХрпНроХройрпН роиро┐ро▓рпИ", 'currentTokenLabel': "родро▒рпНрокрпЛродрпИроп роЯрпЛроХрпНроХройрпН", 'waitTimeLabel': "роородро┐рокрпНрокро┐роЯрпНроЯ роХро╛родрпНродро┐ро░рпБрокрпНрокрпБ", 'queueLabel': "ро╡ро░ро┐роЪрпИропро┐ро▓рпН", 'alertsTitle': "SMS роОроЪрпНроЪро░ро┐роХрпНроХрпИроХро│рпН", 'smsStatusText': "SMS роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН", 'smsDescription': "роЙроЩрпНроХро│рпН роорпБро▒рпИ роирпЖро░рпБроЩрпНроХрпБроорпН рокрпЛродрпБ роЕро▒ро┐ро╡ро┐роХрпНроХрокрпНрокроЯрпБроорпН", 'healthTipTitle': "ЁЯТб роиро╛ро│ро┐ройрпН роЪрпБроХро╛родро╛ро░ роХрпБро▒ро┐рокрпНрокрпБ", 'registerBtn': "рокрпБродро┐роп роЯрпЛроХрпНроХройрпН рокродро┐ро╡рпБ роЪрпЖропрпНропро╡рпБроорпН", 'manageBtn': "роЯрпЛроХрпНроХройрпН роиро┐ро░рпНро╡ро╛роХроорпН",
        // RegisterToken.html
        'register.page.title': "роирпЛропро╛ро│ро┐ роЯро╛ро╖рпНрокрпЛро░рпНроЯрпБ", 'register.page.subtitle': "роЙроЩрпНроХро│рпН роЯрпЛроХрпНроХройрпИ роОро│ро┐родро╛роХ рокродро┐ро╡рпБ роЪрпЖропрпНропро╡рпБроорпН.", 'register.page.mainbutton': "рокрпБродро┐роп роЯрпЛроХрпНроХройрпН рокродро┐ро╡рпБ роЪрпЖропрпНропро╡рпБроорпН", 'register.modal.title': "рокрпБродро┐роп роЯрпЛроХрпНроХройрпН рокродро┐ро╡рпБ роЪрпЖропрпНропро╡рпБроорпН", 'register.step1.name': "роЕроЯрпИропро╛ро│роорпН", 'register.step2.name': "роирпЛропро╛ро│ро┐ ро╡ро┐ро╡ро░роЩрпНроХро│рпН", 'register.step3.name': "роиро┐ропрооройроорпН", 'register.step4.name': "роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродро▓рпН", 'register.step1.title': "рокроЯро┐ 1: роирпЛропро╛ро│ро┐ роЕроЯрпИропро╛ро│роорпН", 'register.step1.label.mobile': "роорпКрокрпИро▓рпН роОрогрпН:", 'register.step1.helptext': "роЙроЩрпНроХро│рпН роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯрпНроЯрпБ 'Check' роР роЕро┤рпБродрпНродро╡рпБроорпН. роирпАроЩрпНроХро│рпН роПро▒рпНроХройро╡рпЗ рокродро┐ро╡рпБ роЪрпЖропрпНродро┐ро░рпБроирпНродро╛ро▓рпН, роЙроЩрпНроХро│рпН ро╡ро┐ро╡ро░роЩрпНроХро│рпН родро╛ройро╛роХ роиро┐ро░рокрпНрокрокрпНрокроЯрпБроорпН.", 'register.step2.title': "рокроЯро┐ 2: рокрпБродро┐роп роирпЛропро╛ро│ро┐ ро╡ро┐ро╡ро░роЩрпНроХро│рпН", 'register.step2.label.name': "роорпБро┤рпБ рокрпЖропро░рпН:", 'register.step2.label.dob': "рокро┐ро▒роирпНрод родрпЗродро┐:", 'register.step2.label.gender': "рокро╛ро▓ро┐ройроорпН:", 'register.option.select': "родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХ...", 'register.option.male': "роЖрогрпН", 'register.option.female': "рокрпЖрогрпН", 'register.option.other': "рооро▒рпНро▒ро╡рпИ", 'register.step3.title': "рокроЯро┐ 3: роиро┐ропроорой ро╡ро┐ро╡ро░роЩрпНроХро│рпН", 'register.step3.label.doctor': "рооро░рпБродрпНродрпБро╡ро░рпН родрпЗро░рпНро╡рпБ:", 'register.step3.label.date': "родрпЗродро┐:", 'register.step3.label.reason': "ро╡ро░рпБроХрпИроХрпНроХро╛рой роХро╛ро░рогроорпН (роЪрпБро░рпБроХрпНроХрооро╛роХ):", 'register.step4.title': "рокроЯро┐ 4: роЙроЩрпНроХро│рпН ро╡ро┐ро╡ро░роЩрпНроХро│рпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродро╡рпБроорпН", 'register.step4.label.name': "роирпЛропро╛ро│ро┐ропро┐ройрпН рокрпЖропро░рпН:", 'register.step4.label.mobile': "роорпКрокрпИро▓рпН роОрогрпН:", 'register.step4.label.doctor': "рооро░рпБродрпНродрпБро╡ро░рпН:", 'register.step4.label.date': "родрпЗродро┐:", 'register.step4.label.fee': "роХроЯрпНроЯрогроорпН:", 'register.step4.helptext': "родропро╡рпБроЪрпЖропрпНродрпБ роорпЗро▓рпЗ роЙро│рпНро│ родроХро╡ро▓рпИ роородро┐рокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНродрпБ 'Confirm & Register' роР роЕро┤рпБродрпНродро╡рпБроорпН.", 'register.button.previous': "роорпБроирпНродрпИроп", 'register.button.next': "роЕроЯрпБродрпНродродрпБ", 'register.button.submit': "роЙро▒рпБродро┐роЪрпЖропрпНродрпБ рокродро┐ро╡рпБроЪрпЖропрпН"
    }
};

function changeLanguage(langCode) {
    if (!langCode) return;
    localStorage.setItem('preferredLanguage', langCode);
    applyTranslations(langCode);
}

function applyTranslations(langCode) {
    const langPack = translations[langCode] || translations['en'];
    $('.language-btn').removeClass('active');
    $(`.language-btn[data-lang='${langCode}']`).addClass('active');
    $('[data-translate-key]').each(function() {
        const key = $(this).data('translate-key');
        if (langPack[key]) {
             $(this).text(langPack[key]);
        }
    });
    $(document).trigger('languageChange', langCode);
}

$(document).ready(function() {
    $('.language-btn').on('click', function() {
        const langCode = $(this).data('lang');
        changeLanguage(langCode);
    });
    const preferredLanguage = localStorage.getItem('preferredLanguage') || 'en';
    applyTranslations(preferredLanguage);
});