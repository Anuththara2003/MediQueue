<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="icon" href="../HTML/Images/icon.png" type="image/png"> 

    
    <link rel="stylesheet" href="../StyleSheet/AdminDashBoard.css">
    <link rel="stylesheet" href="../StyleSheet/AdminSection.css">
    <link rel="stylesheet" href="../StyleSheet/AdminModel.css">
    <link rel="stylesheet" href="../StyleSheet/AdminSearch.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
    <div class="container">
        
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-heart-pulse"></i> MEDIQUEUE</h1>
                <p>Queue Management System</p>
            </div>
            <div class="nav-menu">
                <div class="nav-item active" onclick="showSection('overview')"><i class="fas fa-chart-pie"></i><span>Dashboard Overview</span></div>
                <div class="nav-item" onclick="showSection('hospitals')"><i class="fas fa-hospital"></i><span>Hospitals & Clinics</span></div>
                <div class="nav-item" onclick="showSection('reports')"><i class="fas fa-file-alt"></i><span>Reports & Analytics</span></div>
                <div class="nav-item" onclick="showSection('sms')"><i class="fas fa-comment-sms"></i><span>SMS Management</span></div>
                <div class="nav-item" onclick="showSection('system')"><i class="fas fa-cogs"></i><span>System Health</span></div>
            </div>
        </div>

        
        <div class="main-content">
          
            <div class="header">
                <div class="header-left">
                    <h1 id="pageTitle">Dashboard Overview</h1>
                    <div class="breadcrumb" id="breadcrumb">Admin / Dashboard</div>
                </div>
                <div class="header-right">
                    <div class="admin-info" id="adminProfileTrigger">
                        <img src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="Admin" class="admin-avatar" id="headerAdminAvatar">
                        <div>
                            <div class="admin-name" id="headerAdminName">Admin User</div>
                            <div class="admin-role">System Administrator</div>
                        </div>
                    </div>
                    <button class="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
            </div>

            <!-- ========= 1. Dashboard Overview Section ========= -->
            <div class="dashboard-section active" id="overview">
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-header"><div class="stat-title">Total Hospitals</div></div><div class="stat-value">12</div></div>
                    <div class="stat-card"><div class="stat-header"><div class="stat-title">Active Clinics</div></div><div class="stat-value">48</div></div>
                    <div class="stat-card"><div class="stat-header"><div class="stat-title">Staff Members</div></div><div class="stat-value">156</div></div>
                    <div class="stat-card"><div class="stat-header"><div class="stat-title">Tokens Today</div></div><div class="stat-value">2,847</div></div>
                </div>
                <div class="content-card">
                    <div class="card-header"><div class="card-title"><i class="fas fa-trophy"></i> Top Performing Clinics</div></div>
                    <div class="table-container"><table class="data-table"><thead><tr><th>Clinic</th><th>Tokens</th><th>Efficiency</th></tr></thead><tbody><tr><td>Kurunegala General - Cardiology</td><td>285</td><td><span class="status-badge status-active">95%</span></td></tr><tr><td>Colombo General - Diabetes</td><td>267</td><td><span class="status-badge status-active">92%</span></td></tr><tr><td>Maharagama Lab - General</td><td>198</td><td><span class="status-badge status-pending">88%</span></td></tr></tbody></table></div>
                </div>
            </div>

            <!-- ========= 2. Hospitals & Clinics Section ========= -->
            <div class="dashboard-section" id="hospitals">
                <div class="section-header">
                    <div class="search-container">
                        <input type="text" placeholder="Search Hospitals in Table..." class="search-bar" id="hospitalSearchInput">
                    </div>
                    <button class="btn btn-primary" onclick="openHospitalModal('add')"><i class="fas fa-plus"></i> Add New Hospital</button>
                </div>
                <div class="content-card">
                    <div class="table-container">
                        <table class="data-table">
                            <thead><tr><th>Hospital Name</th><th>Location</th><th>Clinics</th><th>Status</th><th>Actions</th></tr></thead>
                            <tbody><!-- Data will be loaded by JS --></tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- ========= 3. Reports & Analytics Section ========= -->
            <div class="dashboard-section" id="reports">
                <div class="section-header">
                    <div class="date-range-picker"><label for="dateRangeStart"><i class="fas fa-calendar-alt"></i> Date Range:</label><input type="date" id="dateRangeStart" class="date-input"><span>to</span><input type="date" id="dateRangeEnd" class="date-input"><button class="btn btn-secondary">Apply</button></div>
                    <button class="btn btn-primary"><i class="fas fa-download"></i> Export Report (PDF)</button>
                </div>
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-header"><div class="stat-title">Total Tokens (Period)</div></div><div class="stat-value">45,821</div></div>
                    <div class="stat-card"><div class="stat-header"><div class="stat-title">Avg. Wait Time</div></div><div class="stat-value">32 mins</div></div>
                    <div class="stat-card"><div class="stat-header"><div class="stat-title">Busiest Clinic</div></div><div class="stat-value">Cardiology</div></div>
                    <div class="stat-card"><div class="stat-header"><div class="stat-title">SMS Sent</div></div><div class="stat-value">31,250</div></div>
                </div>
                <div class="content-card">
                    <div class="card-header"><div class="card-title"><i class="fas fa-chart-bar"></i> Token Distribution by Hospital</div></div>
                    <div class="chart-placeholder">📊 Bar Chart Showing Token Counts for Each Hospital</div>
                </div>
            </div>

            <!-- ========= 4. SMS Management Section ========= -->
            <div class="dashboard-section" id="sms">
                <div class="config-grid">
                    <div class="content-card form-section"><div class="card-header"><div class="card-title"><i class="fas fa-cogs"></i> Gateway Configuration</div></div><div class="form-group"><label for="smsApiKey">API Key</label><input type="password" id="smsApiKey" value="abc123def456ghi789"></div><div class="form-group"><label for="senderId">Sender ID</label><input type="text" id="senderId" value="MediQueue"></div><div class="form-group"><label for="smsBalance">SMS Credits Remaining</label><input type="text" id="smsBalance" value="4,812" disabled></div></div>
                    <div class="content-card form-section"><div class="card-header"><div class="card-title"><i class="fas fa-envelope-open-text"></i> Message Templates</div></div><div class="form-group"><label for="smsTemplate">"Approaching Turn" Message:</label><textarea id="smsTemplate">Hello {patient_name}, your token {token_number} at {clinic_name} is approaching. Please be ready.</textarea></div></div>
                </div>
                <div class="content-card">
                    <div class="card-header"><div class="card-title"><i class="fas fa-history"></i> Recent SMS Log</div></div>
                    <div class="table-container"><table class="data-table"><thead><tr><th>To</th><th>Message</th><th>Status</th><th>Timestamp</th></tr></thead><tbody><tr><td>+9477...</td><td>Hello Kamal, your token A52 is approaching...</td><td><span class="status-badge status-active">Delivered</span></td><td>09:32 AM</td></tr><tr><td>+9471...</td><td>Hello Nimal, your token C12 is approaching...</td><td><span class="status-badge status-failed">Failed</span></td><td>09:31 AM</td></tr></tbody></table></div>
                </div>
            </div>

            <!-- ========= 5. System Health Section ========= -->
            <div class="dashboard-section" id="system">
                <div class="config-grid">
                    <div class="content-card"><div class="card-header"><div class="card-title"><i class="fas fa-server"></i> Core Service Status</div></div><div class="status-list"><div class="status-item"><div><span class="status-dot operational"></span> Main Database</div><span class="status-text-ok">Operational</span></div><div class="status-item"><div><span class="status-dot operational"></span> LocationIQ API</div><span class="status-text-ok">Operational</span></div><div class="status-item"><div><span class="status-dot outage"></span> SMS Gateway</div><span class="status-text-fail">Major Outage</span></div><div class="status-item"><div><span class="status-dot operational"></span> Application Server</div><span class="status-text-ok">Operational</span></div></div></div>
                    <div class="content-card"><div class="card-header"><div class="card-title"><i class="fas fa-tachometer-alt"></i> Server Performance</div></div><div class="performance-metric"><span>CPU Usage</span><div class="progress-bar-container"><div class="progress-bar" style="width: 34%;">34%</div></div></div><div class="performance-metric"><span>Memory Usage</span><div class="progress-bar-container"><div class="progress-bar" style="width: 58%;">58%</div></div></div><div class="performance-metric"><span>System Uptime</span><strong>12 Days, 4 Hours</strong></div></div>
                </div>
                <div class="content-card">
                    <div class="card-header"><div class="card-title"><i class="fas fa-exclamation-triangle"></i> Recent System Logs</div></div><div class="log-entry"><strong>[ERROR]</strong> SMS Gateway API timeout - 09:31 AM</div><div class="log-entry"><strong>[INFO]</strong> System backup completed successfully - 02:00 AM</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals (Popups) -->
    <!-- === නිවැරදි කරන ලද Profile Modal === -->
    <div id="profileModal" class="modal-backdrop">
        <div class="modal-content">
            <form id="profileForm">
                <div class="modal-header">
                    <h2><i class="fas fa-user-edit"></i> Admin Profile</h2>
                    <span class="modal-close-btn">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="profile-picture-section">
                        <img src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="Admin Avatar" id="profileModalAvatar">
                        <label for="avatarUpload" class="upload-btn">
                            <i class="fas fa-camera"></i> Change Photo
                        </label>
                        <input type="file" id="avatarUpload" accept="image/*" style="display: none;">
                    </div>
                    <div class="form-group">
                        <label for="profileFirstName">First Name</label>
                        <input type="text" id="profileFirstName" value="Admin">
                    </div>
                    <div class="form-group">
                        <label for="profileLastName">Last Name</label>
                        <input type="text" id="profileLastName" value="User">
                    </div>
                    <div class="form-group">
                        <label for="profileEmail">Email Address</label>
                        <input type="email" id="profileEmail" value="admin@mediqueue.com">
                    </div>
                    <div class="form-group">
                        <label for="profileRole">Role</label>
                        <input type="text" id="profileRole" value="System Administrator" disabled>
                    </div>
                    <div class="form-group">
                        <label for="profilePassword">New Password</label>
                        <input type="password" id="profilePassword" placeholder="Enter new password (optional)">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Hospital Modal -->
    <div id="hospitalModal" class="modal-backdrop">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Hospital</h2>
                <span class="modal-close-btn">&times;</span>
            </div>
            <div class="modal-body">
                <div id="hospitalSearchStep">
                    <p class="modal-instruction">Start by searching for a hospital to add.</p>
                    <div class="modal-search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search for hospitals in Sri Lanka..." class="search-bar" id="modalHospitalSearchInput">
                    </div>
                    <div id="modalHospitalSearchResults" class="search-results"></div>
                </div>
                <div id="hospitalDetailsStep" style="display: none;">
                    <form id="hospitalForm">
                        <div class="form-group">
                            <label for="hospitalName">Hospital Name</label>
                            <input type="text" id="hospitalName" required>
                        </div>
                        <div class="form-group">
                            <label for="hospitalLocation">Location</label>
                            <input type="text" id="hospitalLocation" required>
                        </div>
                        <div class="form-group">
                            <label for="hospitalClinics">Number of Clinics</label>
                            <input type="number" id="hospitalClinics" required value="0" min="0">
                        </div>
                        <div class="form-group">
                            <label for="hospitalStatus">Status</label>
                            <select id="hospitalStatus" required>
                                <option value="active" selected>Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" form="hospitalForm" class="btn btn-primary" disabled>Save Hospital</button>
            </div>
        </div>
    </div>

    <!-- Single JS File Link -->
    <script src="../JS/Main.js"></script>
</body>

</html>