<!DOCTYPE html>
<html>
<head>
    <title>API Test </title>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Include SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

    <h1>Testing MyMemory API with SweetAlert...</h1>
    <p>The result will be shown in a popup with a loading indicator.</p>

    <script>
        // The text to be translated
        const textToTranslate = "Patient Dashboard";
        // The target language
        const targetLanguage = "si"; // 'si' for Sinhala

        // Prepare the API URL
        const apiUrl = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(textToTranslate)}&langpair=en|${targetLanguage}`;

        console.log("Sending request to MyMemory API...");

        // Show a loading popup before sending the request
        Swal.fire({
            title: 'Translating...',
            text: 'Please wait while we fetch the translation.',
            allowOutsideClick: false,
            didOpen: () => {
                Swal.showLoading();
            }
        });

        // Send the AJAX call
        $.ajax({
            method: 'GET',
            url: apiUrl,
            success: function(response) {
                // On success, show the result in a SweetAlert
                if (response.responseStatus === 200) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Translation Successful!',
                        html: `<b>Original Text:</b> ${textToTranslate}<br><b>Translated Text:</b> ${response.responseData.translatedText}`
                    });
                } else {
                    // If the API returns a known error
                    Swal.fire({
                        icon: 'error',
                        title: 'API Error!',
                        text: response.responseDetails
                    });
                }
            },
            error: function(err) {
                // On failure, show an error in a SweetAlert
                Swal.fire({
                    icon: 'error',
                    title: 'Oops... Something went wrong!',
                    text: 'There was a network error. Please check your connection and try again.'
                });
                console.error("‚ùå FAILED! Network error details:", err);
            }
        });
    </script>

</body>
</html>